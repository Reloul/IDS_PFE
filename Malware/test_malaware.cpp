#include <windows.h>
#include <iostream>
#include <fstream>

void createFakeRegistryEntry() {
    HKEY hKey;
    const char* regPath = "SOFTWARE\\FakeMalware";
    const char* valueName = "SuspiciousValue";
    const char* data = "FakeData";

    if (RegCreateKeyExA(HKEY_CURRENT_USER, regPath, 0, NULL, REG_OPTION_NON_VOLATILE, KEY_WRITE, NULL, &hKey, NULL) == ERROR_SUCCESS) {
        RegSetValueExA(hKey, valueName, 0, REG_SZ, (BYTE*)data, strlen(data) + 1);
        RegCloseKey(hKey);
        std::cout << "[INFO] Clé de registre factice ajoutée !" << std::endl;
    } else {
        std::cout << "[INFO] Impossible de créer la clé de registre (Permissions ?)" << std::endl;
    }
}

void createSuspiciousFile() {
    std::ofstream file("C:\\Windows\\Temp\\fake_malware.txt");
    if (file.is_open()) {
        file << "Ceci est un fichier factice ressemblant à un malware.";
        file.close();
        std::cout << "[INFO] Fichier suspect créé !" << std::endl;
    }
}

int main() {
    std::cout << "[INFO] Lancement du faux malware..." << std::endl;

    createFakeRegistryEntry();
    createSuspiciousFile();

    Sleep(5000);  // Simule une activité persistante
    std::cout << "[INFO] Fin du faux malware." << std::endl;
    return 0;
}
